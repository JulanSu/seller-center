webpackJsonp([34],{HRGl:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"account-list"},[e("el-col",{staticClass:"tool-bar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[e("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.addAccount}},[t._v("新建子账号")])],1),t._v(" "),e("el-table",{attrs:{data:t.datas}},[e("el-table-column",{attrs:{prop:"account",label:"账号名","min-width":"200",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"使用者","min-width":"200",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"roleName",label:"岗位","min-width":"200",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"isUsed",formatter:t.formatUsed,label:"状态","min-width":"200",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作","min-width":"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{attrs:{to:{name:"编辑子账号",query:{id:a.row.storeOperatorId}}}},[t._v("编辑")]),t._v(" "),e("span",{on:{click:function(e){t.handleOptation(a.row)}}},[t._v(t._s(1==a.row.isUsed?"冻结":"解冻"))])]}}])})],1),t._v(" "),e("el-col",{staticClass:"tool-bar",staticStyle:{"margin-top":"20px"},attrs:{span:24}},[e("el-pagination",{staticStyle:{float:"right"},attrs:{"page-sizes":[20,50,100],"current-page":t.pageNum,"page-size":t.pageSize,layout:"sizes,prev, pager, next, jumper,total",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)},o=[],s={render:n,staticRenderFns:o};a.a=s},UpfK:function(t,a,e){"use strict";function n(t){e("Y1Hw")}Object.defineProperty(a,"__esModule",{value:!0});var o=e("venH"),s=e("HRGl"),i=e("mPyB"),c=n,r=i(o.a,s.a,!1,c,null,null);a.default=r.exports},Y1Hw:function(t,a,e){var n=e("c7jU");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("6imX")("61897ec2",n,!0)},c7jU:function(t,a,e){a=t.exports=e("bKW+")(!0),a.push([t.i,".account-list{padding:40px 40px 0 20px}.account-list a{text-decoration:none}.account-list .tool-bar{background:none;padding:0;margin-bottom:20px}.account-list .cell a{color:#45cdb6}.account-list .cell span{color:#45cdb6;padding-left:20px;cursor:pointer}","",{version:3,sources:["E:/github/seller-center/src/views/shops/AccountList.vue"],names:[],mappings:"AACA,cACE,wBAA0B,CAC3B,AACD,gBACI,oBAAsB,CACzB,AACD,wBACI,gBAAiB,AACjB,UAAW,AACX,kBAAoB,CACvB,AACD,sBACI,aAAe,CAClB,AACD,yBACI,cAAe,AACf,kBAAmB,AACnB,cAAgB,CACnB",file:"AccountList.vue",sourcesContent:["\n.account-list {\n  padding: 40px 40px 0 20px;\n}\n.account-list a {\n    text-decoration: none;\n}\n.account-list .tool-bar {\n    background: none;\n    padding: 0;\n    margin-bottom: 20px;\n}\n.account-list .cell a {\n    color: #45cdb6;\n}\n.account-list .cell span {\n    color: #45cdb6;\n    padding-left: 20px;\n    cursor: pointer;\n}\n"],sourceRoot:""}])},venH:function(t,a,e){"use strict";var n=e("pgiz");a.a={data:function(){return{datas:[],total:0,pageSize:20,pageNum:1,listLoading:!1,addLoading:!1,usedNum:"",addFlag:!1}},methods:{getNum:function(t){var a=this,e={storeId:config.storeId};this.listLoading=!0,Object(n.w)(e).then(function(e){a.listLoading=!1,0==e.data.code&&(a.usedNum=e.data.data.usedNum,a.usedNum>=5?a.$message({message:"子账号使用数量已满，先去冻结子账号",type:"warning"}):a.addFlag?a.optation():a.handleAjax(t))}).catch(function(t){a.listLoading=!1,a.$message.error("接口建立连接失败")})},addAccount:function(){this.addFlag=!0,this.getNum()},optation:function(){this.addFlag=!1,this.$router.push({path:"/store/bypass-management/new-account"})},formatUsed:function(t){return 0==t.isUsed?"已冻结":"使用中"},getAccountList:function(){var t=this,a={storeId:config.storeId,pageSize:this.pageSize,pageNum:this.pageNum};this.listLoading=!0,Object(n.x)(a).then(function(a){0==a.data.code?(t.total=Number(a.data.data.total),t.datas=a.data.data.list):t.$message.error(a.data.message),t.listLoading=!1}).catch(function(a){t.listLoading=!1,t.$message.error("接口建立连接失败")})},handleSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getAccountList()},handleOptation:function(t){1==t.isUsed?this.handleAjax(t):this.getNum(t)},handleAjax:function(t){var a=this,e="解冻",o=1;1==t.isUsed&&(e="冻结",o=0),this.$confirm("确定要"+e+t.account+"这个账号吗?","提示",{type:"warning"}).then(function(){a.listLoading=!0;var e=new URLSearchParams;e.append("storeOperatorId",t.storeOperatorId),e.append("isUsed",o),Object(n.t)(e).then(function(t){a.listLoading=!1,0==t.data.code?a.getAccountList():"所选角色已冻结"==t.data.message?a.$message.error("请先在管理角色中启用该子账号的角色"):a.$message.error(t.data.message)}).catch(function(t){a.listLoading=!1,a.$message.error("接口建立连接失败")})})},handleCurrentChange:function(t){this.pageNum=t,this.getAccountList()}},mounted:function(){this.getAccountList()}}}});
//# sourceMappingURL=34.477770b5b72b8b746ba3.js.map