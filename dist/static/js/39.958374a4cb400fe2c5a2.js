webpackJsonp([39],{"0yvt":function(e,t,i){t=e.exports=i("bKW+")(!0),t.push([e.i,".add-store{padding-top:20px}.add-store li,.add-store ol,.add-store ul{padding:0;margin:0;list-style:none}.add-store p{margin:0}.add-store .wid280{width:280px}.add-store .wid400{width:400px}.add-store .exhibition{font-size:14px;color:#333}.add-store .address+.el-form-item__error{display:none}.add-store .el-dialog--tiny{min-width:490px}.add-store .el-dialog--tiny .el-dialog__footer{padding-bottom:50px}.add-store .el-dialog--tiny .el-dialog__footer .dialog-footer{display:block;text-align:center}.add-store .el-dialog--tiny .el-dialog__body{padding:40px 20px}.add-store .el-dialog--tiny .el-dialog__body .suc{width:340px;height:50px;margin:0 auto}.add-store .el-dialog--tiny .el-dialog__body .suc span{float:left;display:inline-block;width:50px;height:50px;font-size:46px;margin-top:3px;color:#41cac0;padding-right:10px}.add-store .el-dialog--tiny .el-dialog__body .suc div{float:left;width:280px}.add-store .el-dialog--tiny .el-dialog__body .suc div h2{font-size:18px;color:#333;height:50px;line-height:50px;margin:0;margin-left:15px}.add-store .el-dialog--tiny .el-dialog__body .suc div p{font-size:14px;color:#999;height:20px;line-height:20px;padding-top:5px}","",{version:3,sources:["E:/github/seller-center/src/views/shops/AddShop.vue"],names:[],mappings:"AAEA,WACE,gBAAkB,CAInB,AACD,0CACI,UAAW,AACX,SAAU,AACV,eAAiB,CACpB,AACD,aACI,QAAU,CACb,AACD,mBACI,WAAa,CAChB,AACD,mBACI,WAAa,CAChB,AACD,uBACI,eAAgB,AAChB,UAAe,CAClB,AACD,yCACI,YAAc,CACjB,AACD,4BACI,eAAiB,CACpB,AACD,+CACM,mBAAqB,CAC1B,AACD,8DACQ,cAAe,AACf,iBAAmB,CAC1B,AACD,6CACM,iBAAmB,CACxB,AACD,kDACQ,YAAa,AACb,YAAa,AACb,aAAe,CACtB,AACD,uDACU,WAAY,AACZ,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,eAAgB,AAChB,eAAgB,AAChB,cAAe,AACf,kBAAoB,CAC7B,AACD,sDACU,WAAY,AACZ,WAAa,CACtB,AACD,yDACY,eAAgB,AAChB,WAAe,AACf,YAAa,AACb,iBAAkB,AAClB,SAAU,AACV,gBAAkB,CAC7B,AACD,wDACY,eAAgB,AAChB,WAAe,AACf,YAAa,AACb,iBAAkB,AAClB,eAAiB,CAC5B",file:"AddShop.vue",sourcesContent:['\n@charset "UTF-8";\n.add-store {\n  padding-top: 20px;\n  /* 公共样式 */\n  /* 只读样式 */\n  /* 成功弹框样式 */\n}\n.add-store ol, .add-store ul, .add-store li {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n}\n.add-store p {\n    margin: 0;\n}\n.add-store .wid280 {\n    width: 280px;\n}\n.add-store .wid400 {\n    width: 400px;\n}\n.add-store .exhibition {\n    font-size: 14px;\n    color: #333333;\n}\n.add-store .address + .el-form-item__error {\n    display: none;\n}\n.add-store .el-dialog--tiny {\n    min-width: 490px;\n}\n.add-store .el-dialog--tiny .el-dialog__footer {\n      padding-bottom: 50px;\n}\n.add-store .el-dialog--tiny .el-dialog__footer .dialog-footer {\n        display: block;\n        text-align: center;\n}\n.add-store .el-dialog--tiny .el-dialog__body {\n      padding: 40px 20px;\n}\n.add-store .el-dialog--tiny .el-dialog__body .suc {\n        width: 340px;\n        height: 50px;\n        margin: 0 auto;\n}\n.add-store .el-dialog--tiny .el-dialog__body .suc span {\n          float: left;\n          display: inline-block;\n          width: 50px;\n          height: 50px;\n          font-size: 46px;\n          margin-top: 3px;\n          color: #41cac0;\n          padding-right: 10px;\n}\n.add-store .el-dialog--tiny .el-dialog__body .suc div {\n          float: left;\n          width: 280px;\n}\n.add-store .el-dialog--tiny .el-dialog__body .suc div h2 {\n            font-size: 18px;\n            color: #333333;\n            height: 50px;\n            line-height: 50px;\n            margin: 0;\n            margin-left: 15px;\n}\n.add-store .el-dialog--tiny .el-dialog__body .suc div p {\n            font-size: 14px;\n            color: #999999;\n            height: 20px;\n            line-height: 20px;\n            padding-top: 5px;\n}\n'],sourceRoot:""}])},CER4:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"add-store",attrs:{id:"add-store"}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"60%","min-width":"600px"},attrs:{model:e.ruleForm,"label-width":"80px",rules:e.rules}},[i("el-form-item",{attrs:{label:"门店名称","label-width":"120px",prop:"name"}},[i("el-input",{staticClass:"wid280",attrs:{maxlength:30,placeholder:"请输入门店名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"门店联系人","label-width":"120px",prop:"contactPerson"}},[i("el-input",{staticClass:"wid280",attrs:{maxlength:30,placeholder:"请输入门店联系人"},model:{value:e.ruleForm.contactPerson,callback:function(t){e.$set(e.ruleForm,"contactPerson",t)},expression:"ruleForm.contactPerson"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系人手机号","label-width":"120px",prop:"contactMobile"}},[i("el-input",{staticClass:"wid280",attrs:{maxlength:11,placeholder:"请输入联系人手机号"},model:{value:e.ruleForm.contactMobile,callback:function(t){e.$set(e.ruleForm,"contactMobile",t)},expression:"ruleForm.contactMobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"营业时间","label-width":"120px",prop:"workTime"}},[i("el-input",{staticClass:"wid280",attrs:{maxlength:30,placeholder:"请输入营业时间"},model:{value:e.ruleForm.workTime,callback:function(t){e.$set(e.ruleForm,"workTime",t)},expression:"ruleForm.workTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"门店地址","label-width":"120px",prop:"address"}},[i("v-distpicker",{attrs:{province:e.select.province,city:e.select.city,area:e.select.area},on:{province:e.onProvince,city:e.onCity,selected:e.onSelected}})],1),e._v(" "),i("el-form-item",{attrs:{label:"","label-width":"120px",prop:"address"}},[i("el-input",{staticClass:"wid280",attrs:{id:"ser",placeholder:"输入详细地址"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}}),e._v(" "),i("el-button",{staticClass:"mapbtn",attrs:{type:"primary"},on:{click:e.searchbtn}},[e._v("搜索地图")])],1),e._v(" "),i("el-form-item",{attrs:{label:"经纬坐标","label-width":"120px"}},[i("p",[e._v(e._s(e.ruleForm.longitude+","+e.ruleForm.latitude))])]),e._v(" "),i("el-form-item",{attrs:{label:"","label-width":"120px"}},[i("map-view",{ref:"MapView",attrs:{longitude:e.ruleForm.longitude,latitude:e.ruleForm.latitude},on:{listenToChildEvent:e.showsite,listenTolongitude:e.getResult}})],1),e._v(" "),i("el-form-item",{attrs:{label:"","label-width":"120px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[1==e.isAdd?i("span",[e._v("添加")]):i("span",[e._v("保存")])])],1)],1)],1)},r=[],o={render:a,staticRenderFns:r};t.a=o},mdgG:function(e,t,i){"use strict";var a=i("c22B"),r=i.n(a),o=i("TJQ2"),s=i("pgiz");t.a={components:{VDistpicker:r.a,MapView:o.a},data:function(){var e=function(e,t,i){if(""===t)i(new Error("请输入手机号"));else{var a=t.slice(0,1);11!=t.length||1!=a?i(new Error("请输入正确的手机号")):i()}},t=function(e,t,i){var a=/^\d+$/g;t.match(a)?i():i(new Error("请输入正确的手机号"))};return{listLoading:!1,dialogVisible1:!1,height:300,selCity:"",selArea:"",selProvince:"",sel:"",isAdd:1,select:{province:"省",city:"市",area:"区"},ruleForm:{storeBranchId:"",name:"",contactPerson:"",contactMobile:"",workTime:"",address:"",longitude:"",latitude:"",isHead:""},rules:{name:[{required:!0,message:"请输入门店名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 位",trigger:"blur"}],contactMobile:[{required:!0,validator:e,trigger:"blur"},{validator:t,trigger:"blur"},{validator:t,trigger:"change"}],contactPerson:[{required:!0,message:"请输入门店联系人",trigger:"blur"},{min:2,max:30,message:"请输入正确的门店联系人",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],workTime:[{required:!1,message:"长度在最多 30 位",trigger:"change"}]}}},mounted:function(){var e=this.$route.params.id;e&&(this.isAdd=2,this.dataFetch(e)),document.getElementsByClassName("content-container")[0].addEventListener("scroll",this.handleScroll)},methods:{handleScroll:function(){for(var e=document.getElementsByClassName("tangram-suggestion-main"),t=0;t<e.length;t++)e[t].style.display="none"},searchbtn:function(){var e=this.ruleForm.address;this.$refs.MapView.searchMap(e)},getResult:function(e){this.ruleForm.address=e},onProvince:function(e){this.select.province=e.value,e.code?this.selProvince=e.value:this.selProvince="",this.selCity="",this.selArea=""},onCity:function(e){this.select.city=e.value,e.code?this.selCity=e.value:this.selCity="",this.selArea=""},onSelected:function(e){this.select.area=e.area.value,e.area.code?this.selArea=e.area.value:this.selArea=""},showsite:function(e,t){this.ruleForm.longitude=e,this.ruleForm.latitude=t},dataFetch:function(e){var t=this,i={storeBranchId:e};Object(s.m)(i).then(function(e){if(e.data.data){t.ruleForm=e.data.data;t.switchover(t.ruleForm.address),t.ruleForm.longitude/=1e6,t.ruleForm.latitude/=1e6,t.$refs.MapView.creatmap(t.ruleForm.longitude,t.ruleForm.latitude);var i=window.setTimeout(function(){for(var e=document.getElementsByClassName("tangram-suggestion-main"),t=0;t<e.length;t++)e[t].style.display="none";window.clearTimeout(i)},500)}else t.$message.error(e.data.message)})},switchover:function(e){var t=e.split("*"),i=t.length;4==i?(this.select.province=this.selProvince=t[0],this.select.city=this.selCity=t[1],this.select.area=this.selArea=t[2],this.ruleForm.address=t[3],console.log(this.ruleForm.address)):3==i?(this.select.province=this.selProvince=t[0],this.select.city=this.selCity=t[1],this.ruleForm.address=t[2]):2==i?(this.select.province=this.selProvince=t[0],this.ruleForm.address=t[1]):this.ruleForm.address=t[0],this.$refs.MapView.againAddr(this.ruleForm.address)},getBack:function(){this.dialogVisible1=!1,this.$router.push({path:"/store/shop-management"})},suc:function(){this.$message({message:"提交成功",type:"success",onClose:function(){that.$router.push({path:"/store/shop-management"})}})},add:function(e){var t=this;Object(s.N)(e).then(function(e){t.listLoading=!1,0==e.data.code?t.suc():t.$message.error(e.data.message)}).catch(function(e){t.listLoading=!1,t.$message.error("接口建立连接失败")})},update:function(e){var t=this;Object(s.R)(e).then(function(e){t.listLoading=!1,0==e.data.code?t.suc():t.$message.error(e.data.message)}).catch(function(e){t.listLoading=!1,t.$message.error("接口建立连接失败")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(!t.selProvince)return t.$message({message:"请选择省市区",type:"warning"}),!1;t.sel=t.selProvince,t.selCity&&(t.sel+="*"+t.selCity),t.selArea&&(t.sel+="*"+t.selArea);var i=new URLSearchParams;i.append("name",t.ruleForm.name),i.append("contactPerson",t.ruleForm.contactPerson),i.append("contactMobile",t.ruleForm.contactMobile),i.append("workTime",t.ruleForm.workTime),i.append("address",t.sel+"*"+t.ruleForm.address),i.append("longitude",Number(1e6*t.ruleForm.longitude)),i.append("latitude",Number(1e6*t.ruleForm.latitude)),i.append("isHead",Number(t.ruleForm.isHead)),t.listLoading=!0,1==t.isAdd?(i.append("storeId",config.storeId),t.add(i)):(i.append("storeBranchId",Number(t.ruleForm.storeBranchId)),t.update(i))})}}}},pVoh:function(e,t,i){"use strict";function a(e){i("siDX")}Object.defineProperty(t,"__esModule",{value:!0});var r=i("mdgG"),o=i("CER4"),s=i("mPyB"),l=a,n=s(r.a,o.a,!1,l,null,null);t.default=n.exports},siDX:function(e,t,i){var a=i("0yvt");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("6imX")("5b42f8bb",a,!0)}});
//# sourceMappingURL=39.958374a4cb400fe2c5a2.js.map