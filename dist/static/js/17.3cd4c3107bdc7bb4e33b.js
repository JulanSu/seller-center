webpackJsonp([17],{"/Low":function(e,t,r){var s=r("a1m/");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r("6imX")("735e7d84",s,!0)},"3SZ7":function(e,t,r){e.exports={default:r("CnbX"),__esModule:!0}},CnbX:function(e,t,r){var s=r("ZBPP"),i=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},"a1m/":function(e,t,r){t=e.exports=r("bKW+")(!0),t.push([e.i,".shop-message p{margin:0}.shop-message .wid280{width:280px}.shop-message .wid400{width:400px}.shop-message .exhibition{padding-left:10px;font-size:14px;color:#333}.shop-message .category-bar{padding:20px 0 20px 20px}.shop-message li,.shop-message ol,.shop-message ul{padding:0;margin:0;list-style:none}.shop-message .address+.el-form-item__error{display:none}","",{version:3,sources:["E:/github/seller-center/src/views/shops/Message.vue"],names:[],mappings:"AAMA,gBACI,QAAU,CACb,AACD,sBACI,WAAa,CAChB,AACD,sBACI,WAAa,CAChB,AACD,0BACI,kBAAmB,AACnB,eAAgB,AAChB,UAAe,CAClB,AACD,4BACI,wBAA0B,CAC7B,AACD,mDACI,UAAW,AACX,SAAU,AACV,eAAiB,CACpB,AACD,4CACI,YAAc,CACjB",file:"Message.vue",sourcesContent:['\n@charset "UTF-8";\n.shop-message {\n  /* 公共样式 */\n  /* 只读样式 */\n}\n.shop-message p {\n    margin: 0;\n}\n.shop-message .wid280 {\n    width: 280px;\n}\n.shop-message .wid400 {\n    width: 400px;\n}\n.shop-message .exhibition {\n    padding-left: 10px;\n    font-size: 14px;\n    color: #333333;\n}\n.shop-message .category-bar {\n    padding: 20px 0 20px 20px;\n}\n.shop-message ol, .shop-message ul, .shop-message li {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n}\n.shop-message .address + .el-form-item__error {\n    display: none;\n}\n'],sourceRoot:""}])},rMw6:function(e,t,r){"use strict";function s(e){r("/Low")}Object.defineProperty(t,"__esModule",{value:!0});var i=r("ssnF"),a=r("zjJv"),o=r("mPyB"),l=s,n=o(i.a,a.a,!1,l,null,null);t.default=n.exports},ssnF:function(e,t,r){"use strict";var s=r("3SZ7"),i=r.n(s),a=r("Ecxi"),o=r("IObT"),l=r("c22B"),n=r.n(l),c=r("TJQ2"),u=r("pgiz");t.a={components:{CategoryBar:a.a,UploadPictures:o.a,VDistpicker:n.a,MapView:c.a},beforeRouteLeave:function(e,t,r){this.flag?this.$confirm("您还未保存，是否去其他页面?","提示",{type:"warning"}).then(function(){r()}).catch(function(){}):r()},data:function(){var e=function(e,t,r){if(""===t)r(new Error("请输入手机号"));else{var s=t.slice(0,1);11!=t.length||1!=s?r(new Error("请输入正确的手机号")):r()}},t=function(e,t,r){var s=/^\d+$/g;t.match(s)?r():r(new Error("请输入正确的手机号"))};return{personals:!1,listLoading:!1,flag:!1,categoryBarTitle:"店铺基本信息",uploadTishi1:"请传160*160,格式要求jpg,jpeg,png,不超过10MB",uploadTishi2:"请上传750*320，格式要求jpg、jpeg、png，不超过10MB",longitude:"",latitude:"",site:"116.4.404015,39.912734",searchsite:"",selcity:"",csname:"",select:{province:"省",city:"市",area:"区"},ruleForm:{storeId:"",shopType:"",name:"",notice:"",logo:"",broadwiseLogo:"",address:"",cityString:"",industryCateString:"",workTime:"",serviceScope:"",Industry:"",BrandStandard:"",contactName:"",contactMobile:"",startValidTime:"",endValidTime:""},biaoji:{},rules:{logo:[{required:!0,message:"请上传店铺LOGO",trigger:"blur"}],broadwiseLogo:[{required:!0,message:"请上传店铺主图",trigger:"blur"}],name:[{required:!0,message:"请输入店铺名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 位",trigger:"blur"}],address:[{required:!0,message:"请输入门店详细地址",trigger:"blur"}],workTime:[{required:!0,message:"请输入营业时间",trigger:"blur"}],contactName:[{required:!0,message:"请输入运营人姓名",trigger:"blur"},{min:2,max:30,message:"请输入正确的运营人姓名",trigger:"blur"}],contactMobile:[{required:!0,validator:e,trigger:"blur"},{validator:t,trigger:"blur"},{validator:t,trigger:"change"}]}}},watch:{"ruleForm.name":function(){this.fillOut("name")},"ruleForm.notice":function(){this.fillOut("notice")},"ruleForm.logo":function(){this.fillOut("logo")},"ruleForm.broadwiseLogo":function(){this.fillOut("broadwiseLogo")},"ruleForm.address":function(){this.fillOut("address")},"ruleForm.latitude":function(){this.fillOut("latitude")},"ruleForm.longitude":function(){this.fillOut("longitude")},"ruleForm.workTime":function(){this.fillOut("workTime")},"ruleForm.contactName":function(){this.fillOut("contactName")},"ruleForm.contactMobile":function(){this.fillOut("contactMobile")}},mounted:function(){this.getShop(),document.getElementsByClassName("content-container")[0].addEventListener("scroll",this.handleScroll),1!=config.storeType&&(this.personals=!0)},computed:{time:function(){var e="";if(this.ruleForm.endValidTime){var t=new Date(this.ruleForm.endValidTime);e=t.getFullYear()+" / "+(t.getMonth()+1)+" / "+t.getDate()}return e}},methods:{handleScroll:function(){for(var e=document.getElementsByClassName("tangram-suggestion-main"),t=0;t<e.length;t++)e[t].style.display="none"},fillOut:function(e){this.biaoji[e]!=this.ruleForm[e]&&(this.flag=!0)},findName:function(){var e=this;if(!this.ruleForm.name||this.ruleForm.name==this.csname)return!1;var t={storeName:this.ruleForm.name};Object(u.P)(t).then(function(t){0!=t.data.code&&e.$message({message:"店铺重名，请重新填写",type:"warning"})})},sucpic1:function(e){this.ruleForm.logo=e},sucpic2:function(e){this.ruleForm.broadwiseLogo=e},getShop:function(){var e=this,t={storeId:config.storeId};Object(u.o)(t).then(function(t){if(0==t.data.code){e.ruleForm=t.data.data,e.ruleForm.shopType=1==e.ruleForm.shopType?"企业入驻":"个人入驻",e.switchover(e.ruleForm.address),e.ruleForm.longitude/=1e6,e.ruleForm.latitude/=1e6,e.biaoji=JSON.parse(i()(e.ruleForm)),e.$refs.MapView.creatmap(e.ruleForm.longitude,e.ruleForm.latitude),e.csname=e.ruleForm.name;var r=window.setTimeout(function(){for(var e=document.getElementsByClassName("tangram-suggestion-main"),t=0;t<e.length;t++)e[t].style.display="none";window.clearTimeout(r)},500)}else e.$message.error(t.data.message)}).catch(function(e){console.log("cw")})},switchover:function(e){var t=e.split("*"),r=t.length;4==r?(this.select.province=this.selProvince=t[0],this.select.city=this.selCity=t[1],this.select.area=this.selArea=t[2],this.ruleForm.address=t[3]):3==r?(this.select.province=this.selProvince=t[0],this.select.city=this.selCity=t[1],this.ruleForm.address=t[2]):2==r?(this.select.province=this.selProvince=t[0],this.ruleForm.address=t[1]):this.ruleForm.address=t[0],this.$refs.MapView.againAddr(this.ruleForm.address)},onProvince:function(e){this.select.province=e.value,e.code?this.selProvince=e.value:this.selProvince="",this.selCity="",this.selArea=""},onCity:function(e){this.select.city=e.value,e.code?this.selCity=e.value:this.selCity="",this.selArea=""},onSelected:function(e){this.select.area=e.area.value,e.area.code?this.selArea=e.area.value:this.selArea=""},showsite:function(e,t){this.ruleForm.longitude=e,this.ruleForm.latitude=t},searchbtn:function(){var e=this.ruleForm.address;this.$refs.MapView.searchMap(e)},getResult:function(e){this.ruleForm.address=e},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(!t.selProvince)return t.$message({message:"请选择省市区",type:"warning"}),!1;t.sel=t.selProvince,t.selCity&&(t.sel+="*"+t.selCity),t.selArea&&(t.sel+="*"+t.selArea);var r=new URLSearchParams;r.append("storeId",t.ruleForm.storeId),r.append("name",t.ruleForm.name),r.append("notice",t.ruleForm.notice),r.append("logo",t.ruleForm.logo),r.append("broadwiseLogo",t.ruleForm.broadwiseLogo),r.append("address",t.sel+"*"+t.ruleForm.address),r.append("longitude",Number(1e6*t.ruleForm.longitude)),r.append("latitude",Number(1e6*t.ruleForm.latitude)),r.append("workTime",t.ruleForm.workTime),r.append("contactName",t.ruleForm.contactName),r.append("contactMobile",t.ruleForm.contactMobile),Object(u.S)(r).then(function(e){0==e.data.code?(t.flag=!1,t.$message({message:"保存成功",type:"success"})):t.$message.error(e.data.message)}).catch(function(e){t.$message.error("接口建立连接失败")})})}}}},zjJv:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{ref:"viewBox",staticClass:"shop-message",attrs:{id:"shop-message"}},[r("category-bar",{attrs:{title:e.categoryBarTitle}}),e._v(" "),r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{staticClass:"lefttit",attrs:{label:"入驻类型",prop:"shopType","label-width":"120px"}},[r("div",{staticClass:"exhibition"},[r("span",[e._v(e._s(e.ruleForm.shopType))])])]),e._v(" "),r("el-form-item",{attrs:{label:"店铺名称",prop:"name","label-width":"120px"}},[r("el-input",{staticClass:"wid280",attrs:{maxlength:20,placeholder:"店铺名称"},on:{blur:function(t){e.findName()}},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"店铺公告",prop:"notice","label-width":"120px"}},[r("el-input",{staticClass:"wid280",attrs:{maxlength:50,placeholder:"店铺公告"},model:{value:e.ruleForm.notice,callback:function(t){e.$set(e.ruleForm,"notice",t)},expression:"ruleForm.notice"}})],1),e._v(" "),r("el-form-item",{staticClass:"requireHezi",attrs:{label:"店铺LOGO","label-width":"120px"}},[r("span",{staticClass:"require",staticStyle:{left:"-90px"}},[e._v("*")]),e._v(" "),r("upload-pictures",{attrs:{url:e.ruleForm.logo,note:e.uploadTishi1,listen:"listenToPic1",picSize:"10.MB"},on:{listenToPic1:e.sucpic1}})],1),e._v(" "),r("el-form-item",{staticClass:"updata",attrs:{label:"",prop:"logo","label-width":"120px"}},[r("el-input",{staticClass:"wid280",model:{value:e.ruleForm.logo,callback:function(t){e.$set(e.ruleForm,"logo",t)},expression:"ruleForm.logo"}})],1),e._v(" "),r("el-form-item",{staticClass:"requireHezi",attrs:{label:"店铺主图","label-width":"120px"}},[r("span",{staticClass:"require",staticStyle:{left:"-78px"}},[e._v("*")]),e._v(" "),r("upload-pictures",{attrs:{url:e.ruleForm.broadwiseLogo,note:e.uploadTishi2,listen:"listenToPic2",picSize:"10.MB"},on:{listenToPic2:e.sucpic2}})],1),e._v(" "),r("el-form-item",{staticClass:"updata",attrs:{label:"",prop:"broadwiseLogo","label-width":"120px"}},[r("el-input",{staticClass:"wid280",model:{value:e.ruleForm.broadwiseLogo,callback:function(t){e.$set(e.ruleForm,"broadwiseLogo",t)},expression:"ruleForm.broadwiseLogo"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"门店地址","label-width":"120px",prop:"address"}},[r("v-distpicker",{attrs:{province:e.select.province,city:e.select.city,area:e.select.area},on:{province:e.onProvince,city:e.onCity,selected:e.onSelected}})],1),e._v(" "),r("el-form-item",{attrs:{label:"","label-width":"120px",prop:"address"}},[r("el-input",{staticClass:"wid280",attrs:{id:"ser",placeholder:"输入详细地址"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}}),e._v(" "),r("el-button",{staticClass:"mapbtn",attrs:{type:"primary"},on:{click:e.searchbtn}},[e._v("搜索地图")])],1),e._v(" "),r("el-form-item",{attrs:{label:"经纬坐标","label-width":"120px"}},[r("p",[e._v(e._s(e.ruleForm.longitude+","+e.ruleForm.latitude))])]),e._v(" "),r("el-form-item",{attrs:{label:"","label-width":"120px"}},[r("map-view",{ref:"MapView",attrs:{longitude:e.ruleForm.longitude,latitude:e.ruleForm.latitude},on:{listenToChildEvent:e.showsite,listenTolongitude:e.getResult}})],1),e._v(" "),r("el-form-item",{attrs:{label:"营业时间",prop:"workTime","label-width":"120px"}},[r("el-input",{staticClass:"wid280",attrs:{maxlength:50,placeholder:"请输入营业时间"},model:{value:e.ruleForm.workTime,callback:function(t){e.$set(e.ruleForm,"workTime",t)},expression:"ruleForm.workTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"服务范围","label-width":"120px"}},[r("div",{staticClass:"exhibition"},[r("span",[e._v(e._s(e.ruleForm.cityString))])])]),e._v(" "),r("el-form-item",{attrs:{label:"主营行业","label-width":"120px"}},[r("div",{staticClass:"exhibition"},[r("span",[e._v(e._s(e.ruleForm.industryCateString))])])]),e._v(" "),e.personals?e._e():r("el-form-item",{attrs:{label:"经营品牌","label-width":"120px"}},[r("div",{staticClass:"exhibition"},[r("span",[e._v(e._s(e.ruleForm.brandString))])])]),e._v(" "),r("el-form-item",{attrs:{label:"运营人姓名",prop:"contactName","label-width":"120px"}},[r("el-input",{staticClass:"wid280",attrs:{maxlength:30,placeholder:"入驻时的姓名 "},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"运营人手机号",prop:"contactMobile","label-width":"120px"}},[r("el-input",{staticClass:"wid280",attrs:{maxlength:11,name:"username",placeholder:"入驻时的手机号"},model:{value:e.ruleForm.contactMobile,callback:function(t){e.$set(e.ruleForm,"contactMobile",t)},expression:"ruleForm.contactMobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"合作有效期","label-width":"120px"}},[r("div",{staticClass:"exhibition"},[e._v("\n\t\t\t"+e._s(e.time)+"\n\t\t\t")])]),e._v(" "),r("el-form-item",{attrs:{label:"","label-width":"120px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)],1)},i=[],a={render:s,staticRenderFns:i};t.a=a}});
//# sourceMappingURL=17.3cd4c3107bdc7bb4e33b.js.map