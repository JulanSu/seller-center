{"version":3,"sources":["webpack:///static/js/15.38ad913ed29097f4b4d6.js","webpack:///./node_modules/.6.26.0@babel-runtime/core-js/json/stringify.js","webpack:///./src/views/shops/NewRole.vue?785d","webpack:///./node_modules/.2.5.1@core-js/library/fn/json/stringify.js","webpack:///./src/views/shops/NewRole.vue?c4a7","webpack:///src/views/shops/NewRole.vue","webpack:///./src/views/shops/NewRole.vue?68b1","webpack:///./src/views/shops/NewRole.vue"],"names":["webpackJsonp","3SZ7","module","exports","__webpack_require__","default","__esModule","6I8f","__webpack_exports__","render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","ref","staticStyle","width","min-width","attrs","model","ruleForm","label-width","rules","label","prop","maxlength","placeholder","callback","$$v","$set","_v","_l","item","key","_s","type","on","click","$event","changePermission","staticRenderFns","esExports","CnbX","core","$JSON","JSON","stringify","it","apply","arguments","Cs2c","content","i","locals","HKWm","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1__api_shopApi__","data","isAdd","listLoading","jurisdiction","storeOperatorRoleId","roleName","roleAuthority","required","message","trigger","min","max","created","_this","Object","then","res","catch","mounted","id","$route","params","dataFetch","methods","_this2","para","parse","sucFun","that","code","$message","onClose","$router","push","path","formName","_this3","$refs","validate","valid","console","log","URLSearchParams","append","selJurisdict","storeId","SCAr","version","sources","names","mappings","file","sourcesContent","sourceRoot","xgSY","injectStyle","ssrContext","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_3_0_vue_loader_lib_selector_type_script_index_0_NewRole_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_3_0_vue_loader_lib_template_compiler_index_id_data_v_d691cd24_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_3_0_vue_loader_lib_selector_type_template_index_0_NewRole_vue__","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/15.38ad913ed29097f4b4d6.js","sourcesContent":["webpackJsonp([15],{\n\n/***/ \"3SZ7\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"CnbX\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"6I8f\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"new-role\"},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],ref:\"ruleForm\",staticStyle:{\"width\":\"60%\",\"min-width\":\"600px\"},attrs:{\"model\":_vm.ruleForm,\"label-width\":\"80px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"岗位名称\",\"label-width\":\"100px\",\"prop\":\"roleName\"}},[_c('el-input',{staticClass:\"wid270\",attrs:{\"maxlength\":20,\"placeholder\":\"请输入岗位名称\"},model:{value:(_vm.ruleForm.roleName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleName\", $$v)},expression:\"ruleForm.roleName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限\",\"label-width\":\"100px\",\"prop\":\"jurisdiction\"}},[_c('el-checkbox-group',{model:{value:(_vm.ruleForm.roleAuthority),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleAuthority\", $$v)},expression:\"ruleForm.roleAuthority\"}},_vm._l((_vm.jurisdiction),function(item){return _c('el-checkbox',{key:item.value,attrs:{\"label\":item.value}},[_vm._v(\"\\n                \"+_vm._s(item.name)+\"\\n            \")])}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"\",\"label-width\":\"100px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.changePermission('ruleForm')}}},[_vm._v(\"修改权限\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"CnbX\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(\"ZBPP\");\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n/***/ }),\n\n/***/ \"Cs2c\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"SCAr\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"6imX\")(\"26305fec\", content, true);\n\n/***/ }),\n\n/***/ \"HKWm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(\"3SZ7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__api_shopApi__ = __webpack_require__(\"pgiz\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      isAdd: 1,\n      listLoading: false,\n      jurisdiction: [],\n\n      ruleForm: {\n        storeOperatorRoleId: '',\n        roleName: '',\n        roleAuthority: []\n      },\n\n      rules: {\n        roleName: [{ required: true, message: '请输入角色名称', trigger: 'blur' }, { min: 1, max: 20, message: '请输入角色名称', trigger: 'blur' }]\n      }\n    };\n  },\n\n  created: function created() {\n    var _this = this;\n\n    //获取店铺权限列表\n    this.listLoading = true;\n    Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"G\" /* roleGetAuthority */])({}).then(function (res) {\n      _this.listLoading = false;\n      _this.jurisdiction = res.data.data;\n    }).catch(function (res) {\n      _this.listLoading = false;\n    });\n  },\n  mounted: function mounted() {\n    /*如果是编辑角色页面，需要取该角色的数据*/\n    var id = this.$route.params.id;\n    if (id) {\n      this.dataFetch(id);\n      this.isAdd = 2; //1是添加,2是编辑\n    }\n  },\n  methods: {\n    /*如果是编辑角色页面，需要取该角色的数据*/\n    dataFetch: function dataFetch(id) {\n      var _this2 = this;\n\n      var para = {\n        storeOperatorRoleId: id\n      };\n      this.listLoading = true;\n      Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"F\" /* roleGet */])(para).then(function (res) {\n        _this2.ruleForm = res.data.data;\n        if (!_this2.ruleForm.roleAuthority) {\n          _this2.ruleForm.roleAuthority = [];\n        } else {\n          _this2.ruleForm.roleAuthority = JSON.parse(_this2.ruleForm.roleAuthority);\n        }\n        _this2.listLoading = false;\n      }).catch(function (res) {\n        _this2.listLoading = false;\n      });\n    },\n\n    //新增或编辑成功后的回调\n    sucFun: function sucFun(res) {\n      var that = this;\n      this.listLoading = false;\n\n      if (res.data.code == 0) {\n        this.$message({\n          message: '提交成功',\n          type: 'success',\n          onClose: function onClose() {\n            that.$router.push({ path: '/store/bypass-management/role-list' });\n          }\n        });\n      }\n    },\n\n    /*修改权限按钮*/\n    changePermission: function changePermission(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this3.listLoading = true;\n\n          var para = new URLSearchParams();\n          para.append('roleName', _this3.ruleForm.roleName);\n          para.append('roleAuthority', __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(_this3.ruleForm.roleAuthority));\n\n          if (_this3.isAdd == 2) {\n            //2是编辑\n            para.append('storeOperatorRoleId', _this3.ruleForm.storeOperatorRoleId);\n            Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"J\" /* roleUpdate */])(para).then(function (res) {\n              _this3.sucFun(res);\n            }).catch(function (res) {\n              _this3.listLoading = false;\n            });\n          } else {\n            console.log(_this3.ruleForm.selJurisdict);\n            para.append('storeId', storeId);\n            Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"I\" /* roleSave */])(para).then(function (res) {\n              _this3.sucFun(res);\n            }).catch(function (res) {\n              _this3.listLoading = false;\n            });\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"SCAr\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"bKW+\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \".new-role{padding:40px 0 0}.new-role .wid270{width:270px}.new-role .el-button{width:100px;height:34px;line-height:34px;background:#41cac0;padding:0;border-color:#41cac0;border-radius:0}\", \"\", {\"version\":3,\"sources\":[\"E:/github/seller-center/src/views/shops/NewRole.vue\"],\"names\":[],\"mappings\":\"AACA,UACE,gBAAsB,CACvB,AACD,kBACI,WAAa,CAChB,AACD,qBACI,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,mBAAoB,AACpB,UAAW,AACX,qBAAsB,AACtB,eAAiB,CACpB\",\"file\":\"NewRole.vue\",\"sourcesContent\":[\"\\n.new-role {\\n  padding: 40px 0 0 0px;\\n}\\n.new-role .wid270 {\\n    width: 270px;\\n}\\n.new-role .el-button {\\n    width: 100px;\\n    height: 34px;\\n    line-height: 34px;\\n    background: #41cac0;\\n    padding: 0;\\n    border-color: #41cac0;\\n    border-radius: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"xgSY\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_3_0_vue_loader_lib_selector_type_script_index_0_NewRole_vue__ = __webpack_require__(\"HKWm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_3_0_vue_loader_lib_template_compiler_index_id_data_v_d691cd24_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_3_0_vue_loader_lib_selector_type_template_index_0_NewRole_vue__ = __webpack_require__(\"6I8f\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Cs2c\")\n}\nvar normalizeComponent = __webpack_require__(\"mPyB\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_3_0_vue_loader_lib_selector_type_script_index_0_NewRole_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_3_0_vue_loader_lib_template_compiler_index_id_data_v_d691cd24_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_3_0_vue_loader_lib_selector_type_template_index_0_NewRole_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/15.38ad913ed29097f4b4d6.js","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.6.26.0@babel-runtime/core-js/json/stringify.js\n// module id = 3SZ7\n// module chunks = 0 12 15","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"new-role\"},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],ref:\"ruleForm\",staticStyle:{\"width\":\"60%\",\"min-width\":\"600px\"},attrs:{\"model\":_vm.ruleForm,\"label-width\":\"80px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"岗位名称\",\"label-width\":\"100px\",\"prop\":\"roleName\"}},[_c('el-input',{staticClass:\"wid270\",attrs:{\"maxlength\":20,\"placeholder\":\"请输入岗位名称\"},model:{value:(_vm.ruleForm.roleName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleName\", $$v)},expression:\"ruleForm.roleName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限\",\"label-width\":\"100px\",\"prop\":\"jurisdiction\"}},[_c('el-checkbox-group',{model:{value:(_vm.ruleForm.roleAuthority),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleAuthority\", $$v)},expression:\"ruleForm.roleAuthority\"}},_vm._l((_vm.jurisdiction),function(item){return _c('el-checkbox',{key:item.value,attrs:{\"label\":item.value}},[_vm._v(\"\\n                \"+_vm._s(item.name)+\"\\n            \")])}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"\",\"label-width\":\"100px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.changePermission('ruleForm')}}},[_vm._v(\"修改权限\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-d691cd24\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/shops/NewRole.vue\n// module id = 6I8f\n// module chunks = 15","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.2.5.1@core-js/library/fn/json/stringify.js\n// module id = CnbX\n// module chunks = 0 12 15","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.0.28.7@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.13.3.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d691cd24\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/.6.0.6@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/.13.3.0@vue-loader/lib/selector.js?type=styles&index=0!./NewRole.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/.3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"26305fec\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/.3.0.3@vue-style-loader!./node_modules/.0.28.7@css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/.13.3.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-d691cd24\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/.6.0.6@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/.13.3.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/shops/NewRole.vue\n// module id = Cs2c\n// module chunks = 15","<template>\r\n\t<section class=\"new-role\">\r\n\t\t<el-form v-loading=\"listLoading\" :model=\"ruleForm\" label-width=\"80px\" :rules=\"rules\" ref=\"ruleForm\" style=\"width:60%;min-width:600px;\">\r\n\t\t\t<el-form-item label=\"岗位名称\" label-width=\"100px\" prop=\"roleName\">\r\n\t\t\t\t<el-input :maxlength=\"20\" v-model=\"ruleForm.roleName\" placeholder=\"请输入岗位名称\" class=\"wid270\"></el-input>\r\n\t\t\t</el-form-item>\t\r\n\t\t\t<el-form-item label=\"权限\" label-width=\"100px\" prop=\"jurisdiction\">\r\n\t\t\t    <el-checkbox-group v-model=\"ruleForm.roleAuthority\">\r\n            <el-checkbox v-for=\"item in jurisdiction\" :label=\"item.value\" :key=\"item.value\">\r\n                {{item.name}}\r\n            </el-checkbox>\r\n\t\t\t    </el-checkbox-group> \r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"\" label-width=\"100px\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"changePermission('ruleForm')\">修改权限</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</section>\t\r\n</template>\r\n\r\n<script>\r\nimport {roleGet,roleUpdate,roleSave,roleGetAuthority} from '@/api/shopApi';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        isAdd:1,\r\n        listLoading:false,\r\n        jurisdiction: [],\r\n\r\n        ruleForm: {\r\n          storeOperatorRoleId:'',\r\n          roleName: '',\r\n          roleAuthority:[]\r\n        },\r\n\r\n        rules: {\r\n          roleName: [\r\n            { required: true, message: '请输入角色名称', trigger: 'blur' },\r\n            { min: 1, max: 20, message: '请输入角色名称', trigger: 'blur' }\r\n          ]\r\n        }\r\n      };\r\n    },\r\n    created:function(){\r\n      //获取店铺权限列表\r\n      this.listLoading = true;\r\n      roleGetAuthority({}).then((res) => {\r\n        this.listLoading = false;\r\n        this.jurisdiction=res.data.data;\r\n      }).catch((res)=> {\r\n        this.listLoading = false;\r\n      });\r\n    },\r\n    mounted:function(){\r\n      /*如果是编辑角色页面，需要取该角色的数据*/\r\n      var id=this.$route.params.id;\r\n      if(id){\r\n        this.dataFetch(id);\r\n        this.isAdd=2;//1是添加,2是编辑\r\n      }\r\n    },\r\n    methods: {\r\n      /*如果是编辑角色页面，需要取该角色的数据*/\r\n      dataFetch(id){\r\n        let para = {\r\n          storeOperatorRoleId:id\r\n        };\r\n        this.listLoading = true;\r\n        roleGet(para).then((res) => {\r\n          this.ruleForm= res.data.data;\r\n          if(!this.ruleForm.roleAuthority){\r\n            this.ruleForm.roleAuthority=[];\r\n          }else{\r\n            this.ruleForm.roleAuthority=JSON.parse(this.ruleForm.roleAuthority);\r\n          }\r\n          this.listLoading = false;\r\n        }).catch((res)=> {\r\n          this.listLoading = false;\r\n        });\r\n\r\n      },\r\n      //新增或编辑成功后的回调\r\n      sucFun(res){\r\n        var that=this;\r\n        this.listLoading = false;\r\n\r\n        if(res.data.code==0){\r\n          this.$message({\r\n            message: '提交成功',\r\n            type: 'success',\r\n            onClose:function(){\r\n              that.$router.push({ path: '/store/bypass-management/role-list' });\r\n            }\r\n          });\r\n        }\r\n      },\r\n      /*修改权限按钮*/\r\n      changePermission(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.listLoading = true;\r\n\r\n            var para = new URLSearchParams();\r\n            para.append('roleName',this.ruleForm.roleName);\r\n            para.append('roleAuthority',JSON.stringify(this.ruleForm.roleAuthority));\r\n            \r\n            if(this.isAdd==2){//2是编辑\r\n              para.append('storeOperatorRoleId',this.ruleForm.storeOperatorRoleId);\r\n              roleUpdate(para).then((res)=> {\r\n                this.sucFun(res);\r\n              }).catch((res)=> {\r\n                this.listLoading = false;\r\n              });\r\n            }else{\r\n              console.log(this.ruleForm.selJurisdict)\r\n              para.append('storeId',storeId);\r\n              roleSave(para).then((res)=>{\r\n                this.sucFun(res);\r\n              }).catch((res)=> {\r\n                this.listLoading = false;\r\n              });\r\n            }\r\n            \r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.new-role{\r\n  padding:40px 0 0 0px;\r\n  .wid270{\r\n    width:270px;\r\n  }\r\n  .el-button{\r\n    width:100px;\r\n    height:34px;\r\n    line-height:34px;\r\n    background:#41cac0;\r\n    padding:0;\r\n    border-color:#41cac0;\r\n    border-radius:0;\r\n  }\r\n} \r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/shops/NewRole.vue","exports = module.exports = require(\"../../../node_modules/.0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".new-role{padding:40px 0 0}.new-role .wid270{width:270px}.new-role .el-button{width:100px;height:34px;line-height:34px;background:#41cac0;padding:0;border-color:#41cac0;border-radius:0}\", \"\", {\"version\":3,\"sources\":[\"E:/github/seller-center/src/views/shops/NewRole.vue\"],\"names\":[],\"mappings\":\"AACA,UACE,gBAAsB,CACvB,AACD,kBACI,WAAa,CAChB,AACD,qBACI,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,mBAAoB,AACpB,UAAW,AACX,qBAAsB,AACtB,eAAiB,CACpB\",\"file\":\"NewRole.vue\",\"sourcesContent\":[\"\\n.new-role {\\n  padding: 40px 0 0 0px;\\n}\\n.new-role .wid270 {\\n    width: 270px;\\n}\\n.new-role .el-button {\\n    width: 100px;\\n    height: 34px;\\n    line-height: 34px;\\n    background: #41cac0;\\n    padding: 0;\\n    border-color: #41cac0;\\n    border-radius: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.0.28.7@css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/.13.3.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-d691cd24\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/.6.0.6@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/.13.3.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/shops/NewRole.vue\n// module id = SCAr\n// module chunks = 15","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.13.3.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d691cd24\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.3.0@vue-loader/lib/selector?type=styles&index=0!./NewRole.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.3.0@vue-loader/lib/selector?type=script&index=0!./NewRole.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d691cd24\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.3.0@vue-loader/lib/selector?type=template&index=0!./NewRole.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/shops/NewRole.vue\n// module id = xgSY\n// module chunks = 15"],"sourceRoot":""}