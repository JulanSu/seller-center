{"version":3,"sources":["webpack:///static/js/15.4b444820f1e784c752d0.js","webpack:///./node_modules/.6.26.0@babel-runtime/core-js/json/stringify.js","webpack:///./src/views/shops/NewRole.vue?785d","webpack:///./node_modules/.2.5.1@core-js/library/fn/json/stringify.js","webpack:///./src/views/shops/NewRole.vue?c4a7","webpack:///src/views/shops/NewRole.vue","webpack:///./src/views/shops/NewRole.vue?68b1","webpack:///./src/views/shops/NewRole.vue"],"names":["webpackJsonp","3SZ7","module","exports","__webpack_require__","default","__esModule","6I8f","__webpack_exports__","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","ref","staticStyle","width","min-width","attrs","model","ruleForm","label-width","rules","label","prop","maxlength","placeholder","on","blur","findName","callback","$$v","$set","_v","_l","item","key","_s","type","click","$event","changePermission","btnHtml","staticRenderFns","esExports","CnbX","core","$JSON","JSON","stringify","it","apply","arguments","Cs2c","content","i","locals","HKWm","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1__api_shopApi__","data","csname","isAdd","listLoading","jurisdiction","storeOperatorRoleId","roleName","roleAuthority","required","message","trigger","min","max","created","_this","Object","then","res","code","$message","error","catch","mounted","id","$route","params","dataFetch","methods","_this2","para","storeId","config","_this3","parse","sucFun","that","onClose","$router","push","path","formName","_this4","$refs","validate","valid","URLSearchParams","append","SCAr","version","sources","names","mappings","file","sourcesContent","sourceRoot","xgSY","injectStyle","ssrContext","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_3_0_vue_loader_lib_selector_type_script_index_0_NewRole_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_3_0_vue_loader_lib_template_compiler_index_id_data_v_d691cd24_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_3_0_vue_loader_lib_selector_type_template_index_0_NewRole_vue__","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/15.4b444820f1e784c752d0.js","sourcesContent":["webpackJsonp([15],{\n\n/***/ \"3SZ7\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(\"CnbX\"), __esModule: true };\n\n/***/ }),\n\n/***/ \"6I8f\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticClass:\"new-role\"},[_c('el-form',{ref:\"ruleForm\",staticStyle:{\"width\":\"60%\",\"min-width\":\"600px\"},attrs:{\"model\":_vm.ruleForm,\"label-width\":\"80px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"岗位名称\",\"label-width\":\"100px\",\"prop\":\"roleName\"}},[_c('el-input',{staticClass:\"wid270\",attrs:{\"maxlength\":20,\"placeholder\":\"请输入岗位名称\"},on:{\"blur\":_vm.findName},model:{value:(_vm.ruleForm.roleName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleName\", $$v)},expression:\"ruleForm.roleName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限\",\"label-width\":\"100px\",\"prop\":\"roleAuthority\"}},[_c('el-checkbox-group',{model:{value:(_vm.ruleForm.roleAuthority),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleAuthority\", $$v)},expression:\"ruleForm.roleAuthority\"}},_vm._l((_vm.jurisdiction),function(item){return _c('el-checkbox',{key:item.value,attrs:{\"label\":item.value}},[_vm._v(\"\\n                \"+_vm._s(item.name)+\"\\n            \")])}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"\",\"label-width\":\"100px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.changePermission('ruleForm')}}},[_vm._v(_vm._s(_vm.btnHtml))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"CnbX\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(\"ZBPP\");\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n/***/ }),\n\n/***/ \"Cs2c\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"SCAr\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"6imX\")(\"26305fec\", content, true);\n\n/***/ }),\n\n/***/ \"HKWm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(\"3SZ7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__api_shopApi__ = __webpack_require__(\"pgiz\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      csname: '',\n      btnHtml: '保存权限',\n      isAdd: 1,\n      listLoading: false,\n      jurisdiction: [],\n\n      ruleForm: {\n        storeOperatorRoleId: '',\n        roleName: '',\n        roleAuthority: []\n      },\n\n      rules: {\n        roleName: [{ required: true, message: '请输入角色名称', trigger: 'blur' }, { min: 1, max: 20, message: '请输入角色名称', trigger: 'blur' }],\n        roleAuthority: [{ type: 'array', required: true, message: '请选择权限', trigger: 'change' }]\n      }\n    };\n  },\n\n  created: function created() {\n    var _this = this;\n\n    //获取店铺权限列表\n    this.listLoading = true;\n    Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"I\" /* roleGetAuthority */])({}).then(function (res) {\n      _this.listLoading = false;\n      if (res.data.code == 0) {\n        _this.jurisdiction = res.data.data;\n      } else {\n        _this.$message.error(res.data.message);\n      }\n    }).catch(function (res) {\n      _this.listLoading = false;\n      _this.$message.error('接口建立连接失败');\n    });\n  },\n  mounted: function mounted() {\n    /*如果是编辑角色页面，需要取该角色的数据*/\n    var id = this.$route.params.id;\n    if (id) {\n      this.dataFetch(id);\n      this.isAdd = 2; //1是添加,2是编辑\n    }\n  },\n  methods: {\n    /*查找角色名是否重名*/\n    findName: function findName() {\n      var _this2 = this;\n\n      if (!this.ruleForm.roleName || this.ruleForm.roleName == this.csname) {\n        return false;\n      }\n      var para = {\n        storeId: config.storeId,\n        roleName: this.ruleForm.roleName\n      };\n      Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"G\" /* roleCheckname */])(para).then(function (res) {\n        if (res.data.code == 1) {\n          _this2.$message.error('角色重名，请重新输入角色名称');\n        }\n      });\n    },\n\n    /*如果是编辑角色页面，需要取该角色的数据*/\n    dataFetch: function dataFetch(id) {\n      var _this3 = this;\n\n      this.btnHtml = '修改权限';\n      var para = {\n        storeOperatorRoleId: id\n      };\n      this.listLoading = true;\n      Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"H\" /* roleGet */])(para).then(function (res) {\n        if (res.data.code == 0) {\n\n          _this3.ruleForm = res.data.data;\n          _this3.csname = _this3.ruleForm.roleName;\n          if (!_this3.ruleForm.roleAuthority) {\n            _this3.ruleForm.roleAuthority = [];\n          } else {\n            _this3.ruleForm.roleAuthority = JSON.parse(_this3.ruleForm.roleAuthority);\n          }\n        }\n\n        _this3.listLoading = false;\n      }).catch(function (res) {\n        _this3.listLoading = false;\n        _this3.$message.error('接口建立连接失败');\n      });\n    },\n\n    //新增或编辑成功后的回调\n    sucFun: function sucFun(res) {\n      var that = this;\n      this.listLoading = false;\n\n      if (res.data.code == 0) {\n        this.$message({\n          message: '提交成功',\n          type: 'success',\n          onClose: function onClose() {\n            that.$router.push({ path: '/store/bypass-management/role-list' });\n          }\n        });\n      } else {\n        this.$message.error(res.data.message);\n      }\n    },\n\n    /*修改权限按钮*/\n    changePermission: function changePermission(formName) {\n      var _this4 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this4.listLoading = true;\n\n          var para = new URLSearchParams();\n          para.append('roleName', _this4.ruleForm.roleName);\n          para.append('roleAuthority', __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(_this4.ruleForm.roleAuthority));\n\n          if (_this4.isAdd == 2) {\n            //2是编辑\n            para.append('storeOperatorRoleId', _this4.ruleForm.storeOperatorRoleId);\n            Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"L\" /* roleUpdate */])(para).then(function (res) {\n              _this4.sucFun(res);\n            }).catch(function (res) {\n              _this4.listLoading = false;\n              _this4.$message.error('接口建立连接失败');\n            });\n          } else {\n            para.append('storeId', config.storeId);\n            Object(__WEBPACK_IMPORTED_MODULE_1__api_shopApi__[\"K\" /* roleSave */])(para).then(function (res) {\n              _this4.sucFun(res);\n            }).catch(function (res) {\n              _this4.listLoading = false;\n              _this4.$message.error('接口建立连接失败');\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"SCAr\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"bKW+\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \".new-role{padding:20px 0 0}.new-role .wid270{width:270px}.new-role .el-button{width:100px;height:34px;line-height:34px;background:#41cac0;padding:0;border-color:#41cac0;border-radius:0}\", \"\", {\"version\":3,\"sources\":[\"E:/github/seller-center/src/views/shops/NewRole.vue\"],\"names\":[],\"mappings\":\"AACA,UACE,gBAAsB,CACvB,AACD,kBACI,WAAa,CAChB,AACD,qBACI,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,mBAAoB,AACpB,UAAW,AACX,qBAAsB,AACtB,eAAiB,CACpB\",\"file\":\"NewRole.vue\",\"sourcesContent\":[\"\\n.new-role {\\n  padding: 20px 0 0 0px;\\n}\\n.new-role .wid270 {\\n    width: 270px;\\n}\\n.new-role .el-button {\\n    width: 100px;\\n    height: 34px;\\n    line-height: 34px;\\n    background: #41cac0;\\n    padding: 0;\\n    border-color: #41cac0;\\n    border-radius: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"xgSY\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_3_0_vue_loader_lib_selector_type_script_index_0_NewRole_vue__ = __webpack_require__(\"HKWm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_3_0_vue_loader_lib_template_compiler_index_id_data_v_d691cd24_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_3_0_vue_loader_lib_selector_type_template_index_0_NewRole_vue__ = __webpack_require__(\"6I8f\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Cs2c\")\n}\nvar normalizeComponent = __webpack_require__(\"mPyB\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_3_0_vue_loader_lib_selector_type_script_index_0_NewRole_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_3_0_vue_loader_lib_template_compiler_index_id_data_v_d691cd24_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_3_0_vue_loader_lib_selector_type_template_index_0_NewRole_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/15.4b444820f1e784c752d0.js","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.6.26.0@babel-runtime/core-js/json/stringify.js\n// module id = 3SZ7\n// module chunks = 1 9 10 11 15 16 17","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticClass:\"new-role\"},[_c('el-form',{ref:\"ruleForm\",staticStyle:{\"width\":\"60%\",\"min-width\":\"600px\"},attrs:{\"model\":_vm.ruleForm,\"label-width\":\"80px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"岗位名称\",\"label-width\":\"100px\",\"prop\":\"roleName\"}},[_c('el-input',{staticClass:\"wid270\",attrs:{\"maxlength\":20,\"placeholder\":\"请输入岗位名称\"},on:{\"blur\":_vm.findName},model:{value:(_vm.ruleForm.roleName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleName\", $$v)},expression:\"ruleForm.roleName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限\",\"label-width\":\"100px\",\"prop\":\"roleAuthority\"}},[_c('el-checkbox-group',{model:{value:(_vm.ruleForm.roleAuthority),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"roleAuthority\", $$v)},expression:\"ruleForm.roleAuthority\"}},_vm._l((_vm.jurisdiction),function(item){return _c('el-checkbox',{key:item.value,attrs:{\"label\":item.value}},[_vm._v(\"\\n                \"+_vm._s(item.name)+\"\\n            \")])}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"\",\"label-width\":\"100px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.changePermission('ruleForm')}}},[_vm._v(_vm._s(_vm.btnHtml))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-d691cd24\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/shops/NewRole.vue\n// module id = 6I8f\n// module chunks = 15","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.2.5.1@core-js/library/fn/json/stringify.js\n// module id = CnbX\n// module chunks = 1 9 10 11 15 16 17","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.0.28.7@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.13.3.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d691cd24\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/.6.0.6@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/.13.3.0@vue-loader/lib/selector.js?type=styles&index=0!./NewRole.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/.3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"26305fec\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/.3.0.3@vue-style-loader!./node_modules/.0.28.7@css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/.13.3.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-d691cd24\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/.6.0.6@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/.13.3.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/shops/NewRole.vue\n// module id = Cs2c\n// module chunks = 15","<template>\r\n\t<section class=\"new-role\" v-loading=\"listLoading\">\r\n\t\t<el-form :model=\"ruleForm\" label-width=\"80px\" :rules=\"rules\" ref=\"ruleForm\" style=\"width:60%;min-width:600px;\">\r\n\t\t\t<el-form-item label=\"岗位名称\" label-width=\"100px\" prop=\"roleName\">\r\n\t\t\t\t<el-input :maxlength=\"20\" v-model=\"ruleForm.roleName\" placeholder=\"请输入岗位名称\" class=\"wid270\" @blur=\"findName\"></el-input>\r\n\t\t\t</el-form-item>\t\r\n\t\t\t<el-form-item label=\"权限\" label-width=\"100px\" prop=\"roleAuthority\">\r\n\t\t\t    <el-checkbox-group v-model=\"ruleForm.roleAuthority\">\r\n            <el-checkbox v-for=\"item in jurisdiction\" :label=\"item.value\" :key=\"item.value\">\r\n                {{item.name}}\r\n            </el-checkbox>\r\n\t\t\t    </el-checkbox-group> \r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"\" label-width=\"100px\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"changePermission('ruleForm')\">{{btnHtml}}</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</section>\t\r\n</template>\r\n\r\n<script>\r\nimport {roleGet,roleUpdate,roleSave,roleGetAuthority,roleCheckname} from '@/api/shopApi';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        csname:'',\r\n        btnHtml:'保存权限',\r\n        isAdd:1,\r\n        listLoading:false,\r\n        jurisdiction: [],\r\n\r\n        ruleForm: {\r\n          storeOperatorRoleId:'',\r\n          roleName: '',\r\n          roleAuthority:[]\r\n        },\r\n\r\n        rules: {\r\n          roleName: [\r\n            { required: true, message: '请输入角色名称', trigger: 'blur' },\r\n            { min: 1, max: 20, message: '请输入角色名称', trigger: 'blur' }\r\n          ],\r\n          roleAuthority: [\r\n            { type: 'array', required: true, message: '请选择权限', trigger: 'change' }\r\n          ]\r\n        }\r\n      };\r\n    },\r\n    created:function(){\r\n      //获取店铺权限列表\r\n      this.listLoading = true;\r\n      roleGetAuthority({}).then((res) => {\r\n        this.listLoading = false;\r\n        if(res.data.code==0){\r\n          this.jurisdiction=res.data.data;\r\n        }else{\r\n          this.$message.error(res.data.message);\r\n        }\r\n        \r\n      }).catch((res)=> {\r\n        this.listLoading = false;\r\n        this.$message.error('接口建立连接失败');\r\n      });\r\n    },\r\n    mounted:function(){\r\n      /*如果是编辑角色页面，需要取该角色的数据*/\r\n      var id=this.$route.params.id;\r\n      if(id){\r\n        this.dataFetch(id);\r\n        this.isAdd=2;//1是添加,2是编辑\r\n      }\r\n    },\r\n    methods: {\r\n      /*查找角色名是否重名*/\r\n      findName(){\r\n        if(!(this.ruleForm.roleName)||(this.ruleForm.roleName==this.csname)){\r\n          return false;\r\n        }\r\n        var para={\r\n          storeId:config.storeId,\r\n          roleName:this.ruleForm.roleName\r\n        }\r\n        roleCheckname(para).then((res) => {\r\n            if(res.data.code==1){\r\n              this.$message.error('角色重名，请重新输入角色名称');\r\n            }\r\n        });\r\n      },\r\n      /*如果是编辑角色页面，需要取该角色的数据*/\r\n      dataFetch(id){\r\n        this.btnHtml='修改权限';\r\n        let para = {\r\n          storeOperatorRoleId:id\r\n        };\r\n        this.listLoading = true;\r\n        roleGet(para).then((res) => {\r\n          if(res.data.code==0){\r\n            \r\n            this.ruleForm= res.data.data;\r\n            this.csname=this.ruleForm.roleName;\r\n            if(!this.ruleForm.roleAuthority){\r\n              this.ruleForm.roleAuthority=[];   \r\n            }else{\r\n              this.ruleForm.roleAuthority=JSON.parse(this.ruleForm.roleAuthority);\r\n\r\n            }\r\n          }\r\n         \r\n          this.listLoading = false;\r\n        }).catch((res)=> {\r\n          this.listLoading = false;\r\n          this.$message.error('接口建立连接失败');\r\n        });\r\n\r\n      },\r\n      //新增或编辑成功后的回调\r\n      sucFun(res){\r\n        var that=this;\r\n        this.listLoading = false;\r\n\r\n        if(res.data.code==0){\r\n          this.$message({\r\n            message: '提交成功',\r\n            type: 'success',\r\n            onClose:function(){\r\n              that.$router.push({ path: '/store/bypass-management/role-list' });\r\n            }\r\n          });\r\n        }else{\r\n          this.$message.error(res.data.message);\r\n        }\r\n      },\r\n      /*修改权限按钮*/\r\n      changePermission(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.listLoading = true;\r\n\r\n            var para = new URLSearchParams();\r\n            para.append('roleName',this.ruleForm.roleName);\r\n            para.append('roleAuthority',JSON.stringify(this.ruleForm.roleAuthority));\r\n            \r\n            if(this.isAdd==2){//2是编辑\r\n              para.append('storeOperatorRoleId',this.ruleForm.storeOperatorRoleId);\r\n              roleUpdate(para).then((res)=> {\r\n                this.sucFun(res);\r\n              }).catch((res)=> {\r\n                this.listLoading = false;\r\n                this.$message.error('接口建立连接失败');\r\n              });\r\n            }else{\r\n              para.append('storeId',config.storeId);\r\n              roleSave(para).then((res)=>{\r\n                this.sucFun(res);\r\n              }).catch((res)=> {\r\n                this.listLoading = false;\r\n                this.$message.error('接口建立连接失败');\r\n              });\r\n            }\r\n            \r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.new-role{\r\n  padding:20px 0 0 0px;\r\n  .wid270{\r\n    width:270px;\r\n  }\r\n  .el-button{\r\n    width:100px;\r\n    height:34px;\r\n    line-height:34px;\r\n    background:#41cac0;\r\n    padding:0;\r\n    border-color:#41cac0;\r\n    border-radius:0;\r\n  }\r\n} \r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/shops/NewRole.vue","exports = module.exports = require(\"../../../node_modules/.0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".new-role{padding:20px 0 0}.new-role .wid270{width:270px}.new-role .el-button{width:100px;height:34px;line-height:34px;background:#41cac0;padding:0;border-color:#41cac0;border-radius:0}\", \"\", {\"version\":3,\"sources\":[\"E:/github/seller-center/src/views/shops/NewRole.vue\"],\"names\":[],\"mappings\":\"AACA,UACE,gBAAsB,CACvB,AACD,kBACI,WAAa,CAChB,AACD,qBACI,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,mBAAoB,AACpB,UAAW,AACX,qBAAsB,AACtB,eAAiB,CACpB\",\"file\":\"NewRole.vue\",\"sourcesContent\":[\"\\n.new-role {\\n  padding: 20px 0 0 0px;\\n}\\n.new-role .wid270 {\\n    width: 270px;\\n}\\n.new-role .el-button {\\n    width: 100px;\\n    height: 34px;\\n    line-height: 34px;\\n    background: #41cac0;\\n    padding: 0;\\n    border-color: #41cac0;\\n    border-radius: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.0.28.7@css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/.13.3.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-d691cd24\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/.6.0.6@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/.13.3.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/shops/NewRole.vue\n// module id = SCAr\n// module chunks = 15","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.13.3.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d691cd24\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.3.0@vue-loader/lib/selector?type=styles&index=0!./NewRole.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.3.0@vue-loader/lib/selector?type=script&index=0!./NewRole.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d691cd24\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.3.0@vue-loader/lib/selector?type=template&index=0!./NewRole.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/shops/NewRole.vue\n// module id = xgSY\n// module chunks = 15"],"sourceRoot":""}